!function(t){function e(o){if(n[o])return n[o].exports;var r=n[o]={exports:{},id:o,loaded:!1};return t[o].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";var o=n(2),r=n(4),s=n(5);o.registerDashboardConnectionElement(),r.registerDashboardLoggerElement(),s.registerTemperatureChartElement()},function(t,e){"use strict";var n=function(){function t(){this.ws=null,this.connectionListeners=[],this.temperatureListeners=[]}return t.prototype.connect=function(t){var e=this;this.ws=new WebSocket(t),this.ws.onopen=function(t){e.onWsOpen(t)},this.ws.onclose=function(t){e.onWsClose(t)},this.ws.onmessage=function(t){e.onWsMessage(t)},this.ws.onerror=function(t){e.onWsError(t)}},t.prototype.close=function(){this.ws.close()},t.prototype.addConnectionListener=function(t){this.connectionListeners.push(t)},t.prototype.addTemperatureListener=function(t){this.temperatureListeners.push(t)},t.prototype.setTemperature=function(t){var e={msg:"setTemperature",temperature:t},n=JSON.stringify(e);this.send(n)},t.prototype.sendTemperature=function(t,e){this.temperatureListeners.forEach(function(n){n.onTemperature(t,e)})},t.prototype.onWsOpen=function(t){this.connectionListeners.forEach(function(e){e.onWsOpen(t)})},t.prototype.onWsClose=function(t){this.ws=null,this.connectionListeners.forEach(function(e){e.onWsClose(t)})},t.prototype.onWsError=function(t){this.connectionListeners.forEach(function(e){e.onWsError(t)}),this.close()},t.prototype.onWsMessage=function(t){this.connectionListeners.forEach(function(e){e.onWsMessage(t)});var e=JSON.parse(t.data);switch(e.msg){case"temperature":this.onTemperature(e);break;default:console.error("Unknonw message : "+e.msg)}},t.prototype.onTemperature=function(t){var e=Number(t.temperature),n=Number(t.time);isNaN(e)||isNaN(n)||this.sendTemperature(e,n)},t.prototype.send=function(t){this.ws.send(t)},t}();e.DashboardWebSocketApi=n,e.theWsApi=new n},function(t,e,n){"use strict";function o(){document.registerElement("dashboard-connection",c)}var r,s=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(1);!function(t){t[t.CONNECTED=1]="CONNECTED",t[t.DISCONNECTED=2]="DISCONNECTED"}(r||(r={}));var c=function(t){function e(){t.apply(this,arguments)}return s(e,t),e.prototype.setController=function(t){this.controller=t},e.prototype.setStateConnected=function(){this.state=r.CONNECTED,this.btnConnect.value="Disconnect"},e.prototype.setStateDisconnected=function(){this.state=r.DISCONNECTED,this.btnConnect.value="Connect"},e.prototype.createdCallback=function(){var t=this;console.log("DashboardConnectionElement.createdCallback()"),this.btnConnect=document.createElement("input"),this.btnConnect.type="button",this.appendChild(this.btnConnect),this.state=r.DISCONNECTED,this.controller=new a(this),this.btnConnect.addEventListener("click",function(e){switch(t.state){case r.CONNECTED:t.controller.disconnect();break;case r.DISCONNECTED:t.controller.connect()}}),this.setStateDisconnected()},e.prototype.attachedCallback=function(){console.log("DashboardConnectionElement.attachedCallback()")},e}(HTMLDivElement),a=function(){function t(t){this.view=t,this.view.setController(this),i.theWsApi.addConnectionListener(this)}return t.prototype.connect=function(){i.theWsApi.connect("ws://localhost:8000/")},t.prototype.disconnect=function(){i.theWsApi.close()},t.prototype.onWsOpen=function(t){this.view.setStateConnected()},t.prototype.onWsClose=function(t){this.view.setStateDisconnected()},t.prototype.onWsMessage=function(t){},t.prototype.onWsError=function(t){this.view.setStateDisconnected()},t}();e.ConnectionController=a,e.registerDashboardConnectionElement=o},function(t,e){"use strict";var n=function(){function t(t,e){this.dataset={data:[],label:e},this.data={datasets:[this.dataset],labels:[]};var n={data:this.data,type:"line"};this.chart=new Chart(t.getContext("2d"),n)}return t.prototype.add=function(t,e){this.dataset.data.push(t),this.data.labels.push(e),this.update()},t.prototype.update=function(){this.chart.update()},t}();e.MyLineChart=n},function(t,e,n){"use strict";function o(){document.registerElement("dashboard-logger",i)}var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},s=n(1),i=function(t){function e(){t.call(this)}return r(e,t),e.prototype.writeToScreen=function(t){var e=new Date;this.textarea.innerHTML=this.textarea.innerHTML+e.toLocaleTimeString()+" : "+t,this.textarea.scrollTop=this.textarea.scrollHeight},e.prototype.createdCallback=function(){var t=this;console.log("DashboardLoggerElement.createdCallback()"),this.textarea=document.createElement("textarea");var e=document.createElement("input");e.type="button",e.value="clear",this.appendChild(this.textarea),this.appendChild(e),e.addEventListener("click",function(e){t.clearText()}),new c(this)},e.prototype.clearText=function(){this.textarea.innerHTML=""},e}(HTMLCanvasElement);e.DashboardLoggerElement=i;var c=function(){function t(t){this.view=t,s.theWsApi.addConnectionListener(this)}return t.prototype.onWsOpen=function(t){this.view.writeToScreen("connected\n")},t.prototype.onWsClose=function(t){this.view.writeToScreen("disconnected\n")},t.prototype.onWsMessage=function(t){this.view.writeToScreen("response: "+t.data+"\n")},t.prototype.onWsError=function(t){this.view.writeToScreen("error: "+t.returnValue+"\n")},t}();e.registerDashboardLoggerElement=o},function(t,e,n){"use strict";function o(){document.registerElement("dashboard-temperature",c)}var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},s=n(1),i=n(3),c=function(t){function e(){t.call(this)}return r(e,t),e.prototype.add=function(t,e){this.chart.add(t,e)},e.prototype.createdCallback=function(){console.log("TemperatureChartElement.createdCallback()");var t=document.createElement("canvas");t.width=600,t.height=400,this.appendChild(t),this.chart=new i.MyLineChart(t,this.title),new a(this)},e}(HTMLElement),a=function(){function t(t){this.view=t,s.theWsApi.addTemperatureListener(this)}return t.prototype.onTemperature=function(t,e){var n=new Date(e);this.view.add(t,n.toTimeString())},t}();e.registerTemperatureChartElement=o}]);